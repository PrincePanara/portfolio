<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <title>Prince Patel - Portfolio OS</title>

        <!-- Lucide Icons for Windows-like iconography -->
        <script src="https://unpkg.com/lucide@latest"></script>

        <style>
        :root {
            --xp-blue: #245DDA;
            --xp-blue-dark: #174094;
            --xp-taskbar: #245DDA;
            --xp-window-bg: #ECE9D8;
            --xp-orange: #E65100;
            --xp-border: #0046D3;
        }

        * {
            box-sizing: border-box;
            user-select: none; /* Desktop feel */
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            font-family: 'Tahoma', 'Segoe UI', sans-serif;
            background: url('https://upload.wikimedia.org/wikipedia/en/2/27/Bliss_%28Windows_XP%29.png') no-repeat center center fixed;
            background-size: cover;
            touch-action: none; /* Prevent browser scrolling to handle window drags */
        }

        /* --- Desktop Icons --- */
        #desktop {
            padding: 10px;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            height: calc(100vh - 40px);
            align-content: flex-start;
            gap: 25px;
        }

        .desktop-icon {
            width: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            text-shadow: 1px 1px 2px black;
            color: white;
            padding: 5px;
            border: 1px solid transparent;
            border-radius: 4px;
            transition: background 0.1s;
        }

        .desktop-icon:hover {
            background-color: rgba(36, 93, 218, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .desktop-icon:active, .desktop-icon.selected {
            background-color: rgba(36, 93, 218, 0.5);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .desktop-icon i {
            margin-bottom: 5px;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
        }

        .icon-label {
            font-size: 11px;
            text-align: center;
            line-height: 1.2;
            margin-top: 2px;
        }

        /* --- Windows --- */
        .window {
            position: absolute;
            background-color: var(--xp-window-bg);
            border: 1px solid #0055EA;
            border-radius: 8px 8px 0 0;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            min-width: 300px;
            min-height: 200px;
            max-width: 100%;
            max-height: calc(100% - 40px);
            animation: windowOpen 0.2s ease-out;
        }
        
        /* Added for close animation */
        .window.closing {
            animation: windowClose 0.2s ease-in forwards;
        }

        .window.maximized {
            position: fixed;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100% - 40px) !important;
            border-radius: 0;
            box-shadow: none;
            max-width: 100vw;
            max-height: calc(100vh - 40px);
        }

        .title-bar {
            height: 30px;
            background: linear-gradient(to bottom, #245DDA 0%, #174094 100%);
            border-radius: 6px 6px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 8px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 1px black;
            font-size: 13px;
            touch-action: none;
            flex-shrink: 0;
        }

        .window.maximized .title-bar {
            border-radius: 0;
        }

        .title-drag-area {
            flex-grow: 1;
            height: 100%;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: move; /* Indicates draggable */
        }

        .window-controls {
            display: flex;
            gap: 4px;
        }

        .control-btn {
            width: 22px;
            height: 22px;
            border: 1px solid white;
            border-radius: 3px;
            background: linear-gradient(to bottom, #4E86F6 0%, #245DDA 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: inset 1px 1px 0px rgba(255,255,255,0.4);
            transition: all 0.1s;
            user-select: none;
        }

        .control-btn:hover {
            filter: brightness(1.1);
        }

        .control-btn:active {
            box-shadow: inset 2px 2px 3px rgba(0,0,0,0.3);
        }

        .control-btn.close-btn {
            background: linear-gradient(to bottom, #E85D5D 0%, #C52323 100%);
        }
        
        .control-btn.close-btn:hover {
            background: linear-gradient(to bottom, #FF7D7D 0%, #E53E3E 100%);
        }
        
        .control-btn svg {
            width: 14px;
            height: 14px;
            stroke-width: 3px;
            pointer-events: none;
        }

        /* --- Window Content --- */
        .window-body {
            flex-grow: 1;
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative; /* For resizer positioning */
        }

        .menu-bar {
            background: #ECE9D8;
            border-bottom: 1px solid #D6D3CE;
            padding: 4px 8px;
            font-size: 12px;
            color: black;
            display: flex;
            gap: 12px;
        }

        .address-bar {
            background: #ECE9D8;
            border-bottom: 1px solid #D6D3CE;
            padding: 4px 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
        }

        .address-input {
            flex-grow: 1;
            border: 1px solid #7F9DB9;
            padding: 2px 5px;
            background: white;
        }

        .content-area {
            background: white;
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            border: 1px solid #D6D3CE;
            margin: 5px;
            font-family: 'Verdana', sans-serif;
            font-size: 14px;
            color: #333;
            cursor: text;
            user-select: text;
            -webkit-overflow-scrolling: touch; /* Smooth scroll on mobile */
            touch-action: auto; /* Re-enable scrolling inside windows */
        }

        /* Added resizer style */
        .resizer {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 15px;
            height: 15px;
            cursor: nwse-resize;
            background: repeating-linear-gradient( -45deg, #ECE9D8, #ECE9D8 2px, #aaa 2px, #aaa 4px );
            z-index: 10;
        }
        
        /* About Me Custom Styles */
        .about-header {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            align-items: flex-start;
        }
        .about-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #e0e0e0;
            border: 2px solid #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            object-fit: cover;
        }
        .about-info {
            flex: 1;
        }
        .about-name {
            margin: 0;
            color: #174094;
            font-size: 24px;
            font-weight: bold;
        }
        .about-title {
            color: #666;
            font-size: 13px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .about-desc {
            font-size: 13px;
            margin: 0;
            color: #333;
        }
        .skills-fieldset {
            border: 1px solid #a0a0ff;
            border-radius: 8px;
            padding: 15px;
            background: #fff;
            margin-top: 10px;
        }
        .skills-fieldset legend {
            color: #245DDA;
            padding: 0 5px;
            font-weight: bold;
            font-size: 13px;
        }
        .skills-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            font-size: 13px;
        }
        .skill-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            font-weight: 500;
        }

        /* Projects List Styles */
        .project-entry {
            border: 1px solid #D6D3CE;
            padding: 15px;
            margin-bottom: 15px;
            background: #fff;
            display: flex;
            flex-direction: column;
            gap: 8px;
            border-radius: 2px;
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .project-title {
            font-weight: bold;
            color: #245DDA;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
            cursor: pointer;
        }
        .project-title:hover {
            text-decoration: underline;
        }

        .project-badge {
            border: 1px solid #ccc;
            background: #fcfcfc;
            padding: 2px 8px;
            font-size: 11px;
            border-radius: 3px;
            color: #333;
            box-shadow: 0 1px 1px rgba(0,0,0,0.05);
        }

        .project-desc {
            font-size: 12px;
            color: #333;
            margin: 0;
            line-height: 1.4;
        }

        .project-actions {
            display: flex;
            gap: 8px;
            margin-top: 5px;
        }

        .xp-btn {
            border: 1px solid #999;
            background: linear-gradient(to bottom, #f9f9f9 0%, #e3e3e3 100%);
            padding: 4px 10px;
            font-size: 11px;
            border-radius: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            color: black;
            font-family: 'Tahoma', sans-serif;
        }
        .xp-btn:hover {
            box-shadow: inset 0 0 2px rgba(0,0,0,0.1);
            background: linear-gradient(to bottom, #fff 0%, #eee 100%);
            border-color: #3C7FB1;
        }

        /* --- Taskbar --- */
        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: linear-gradient(to bottom, #245DDA 0%, #174094 5%, #174094 100%);
            display: flex;
            align-items: center;
            padding: 0;
            z-index: 9999;
            border-top: 2px solid #3E80ED;
        }

        #start-btn {
            height: 100%;
            width: 100px;
            background: linear-gradient(to bottom, #3C8E3C 0%, #5CB85C 10%, #3C8E3C 100%);
            border-radius: 0 10px 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            color: white;
            font-weight: bold;
            font-style: italic;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            cursor: pointer;
            box-shadow: 2px 0 5px rgba(0,0,0,0.3);
            margin-right: 10px;
            transition: filter 0.2s;
        }

        #start-btn:hover { filter: brightness(1.1); }
        #start-btn:active { filter: brightness(0.9); }

        #taskbar-apps {
            flex-grow: 1;
            display: flex;
            gap: 4px;
            padding: 3px;
            overflow-x: auto;
        }

        .taskbar-item {
            background: linear-gradient(to bottom, #3C81F0 0%, #2251BD 100%);
            width: 160px;
            border-radius: 3px;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 12px;
            cursor: pointer;
            border: 1px solid rgba(0,0,0,0.2);
            box-shadow: inset 1px 1px 0 rgba(255,255,255,0.2);
        }

        .taskbar-item:hover {
            background: linear-gradient(to bottom, #5090F8 0%, #2E65D6 100%);
        }

        .taskbar-item.active {
            background: #153C8D;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.5);
            border: 1px solid #102F6F;
        }

        #clock-area {
            width: 100px;
            height: 100%;
            background: #1290E2;
            border-left: 1px solid rgba(0,0,0,0.2);
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            padding-right: 10px;
        }

        /* --- Start Menu --- */
        #start-menu {
            position: absolute;
            bottom: 40px;
            left: 0;
            width: 300px;
            background: white;
            border: 1px solid #0046D3;
            border-radius: 5px 5px 0 0;
            box-shadow: 4px 4px 10px rgba(0,0,0,0.5);
            display: none;
            z-index: 10000;
            animation: slideUp 0.2s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Added animations */
        @keyframes windowOpen {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes windowClose {
            from { transform: scale(1); opacity: 1; }
            to { transform: scale(0.9); opacity: 0; }
        }

        .start-header {
            background: linear-gradient(to bottom, #245DDA 0%, #174094 100%);
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-weight: bold;
            border-radius: 4px 4px 0 0;
        }
        
        .start-header img { border-radius: 4px; border: 2px solid white; }

        .start-body {
            display: flex;
            height: 350px;
        }

        .start-left {
            width: 50%;
            padding: 10px;
            background: white;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .start-right {
            width: 50%;
            background: #D3E5FA;
            border-left: 1px solid #9DBBE6;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .start-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 5px;
            font-size: 12px;
            color: #333;
            cursor: pointer;
            border-radius: 3px;
        }

        .start-item:hover {
            background-color: #2F71CD;
            color: white;
        }
        
        .start-footer {
            background: linear-gradient(to bottom, #4E86F6 0%, #245DDA 100%);
            padding: 10px;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 10px;
            color: white;
            font-size: 11px;
            border-top: 1px solid #E65100;
        }
    </style>
    </head>
    <body>

        <div id="desktop"></div>

        <div id="start-menu">
            <div class="start-header">
                <img
                    src="https://api.dicebear.com/7.x/avataaars/svg?seed=Prince"
                    width="40" height="40" alt="Avatar">
                <span>Prince Patel</span>
            </div>
            <div class="start-body">
                <div class="start-left" id="start-left-items"></div>
                <div class="start-right" id="start-right-items"></div>
            </div>
            <div class="start-footer">
                <div class="start-item" onclick="location.reload()">
                    <i data-lucide="power" width="16"></i> Turn Off Computer
                </div>
            </div>
        </div>

        <div id="taskbar">
            <div id="start-btn" onclick="toggleStartMenu()">
                <i data-lucide="grid" width="18"></i> Start
            </div>
            <div id="taskbar-apps"></div>
            <div id="clock-area">
                <div id="clock-time">12:00 PM</div>
            </div>
        </div>

        <script>
        const apps = {
            'computer': {
                id: 'computer',
                title: 'My Computer',
                icon: 'monitor',
                type: 'system',
                iconColor: '#FFFFFF',
                content: `
                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; gap: 20px;">
                        <img src="IMG_3636.JPG" alt="Your Photo" style="width: 180px; height: 180px; border-radius: 50%; border: 3px solid #245DDA; box-shadow: 0 4px 10px rgba(0,0,0,0.2); object-fit: cover;">
                        <h1 style="margin: 0; color: #174094; font-size: 32px; text-align: center;">PANARA PRINCE</h1>
                    </div>
                `
            },
            'recycle': {
                id: 'recycle',
                title: 'Recycle Bin',
                icon: 'trash-2',
                type: 'explorer',
                iconColor: '#C0C0C0',
                content: `<p>The recycle bin is empty.</p>`
            },
            'about': {
                id: 'about',
                title: 'About Me.txt',
                icon: 'user', 
                type: 'text',
                iconColor: '#4169E1',
                content: `
                    <div class="about-profile">
                        <div class="about-header">
                            <img src="IMG_3636.JPG" alt="Your Photo" class="about-avatar" style="cursor: pointer; transition: transform 0.2s;" title="Your Profile Photo">
                            <div class="about-info">
                                <h2 class="about-name">PANARA PRINCE</h2>
                                <div class="about-title">Full Stack Developer & UI & UX Designer</div>
                                <p class="about-desc">I craft modern web and mobile applications using HTML, CSS, JavaScript, Flutter, Firebase, and Figma.<br>
I blend clean UI design with powerful functionality to create seamless user experiences.<br>
From concept to deployment, I turn complex requirements into simple, elegant solutions.</p>
                            </div>
                        </div>
                        <fieldset class="skills-fieldset">
                            <legend>Skills.exe</legend>
                            <div class="skills-list">
                                <div class="skill-item"><i data-lucide="code-2" color="#245DDA" width="16"></i> HTML, CSS, JavaScript</div>
                                <div class="skill-item"><i data-lucide="server" color="#3C8E3C" width="16"></i>Figma</div>
                                <div class="skill-item"><i data-lucide="database" color="#E65100" width="16"></i> Firebase </div>
                                <div class="skill-item"><i data-lucide="cpu" color="#D32F2F" width="16"></i> System Design</div>
                                <div class="skill-item"><i data-lucide="cpu" color="#D32F2F" width="16"></i> Flutter</div>
                            </div>
                        </fieldset>
                       
                    </div>
                `
            },
            'experience': {
                id: 'experience',
                title: 'Experience.doc',
                icon: 'briefcase', 
                type: 'word',
                iconColor: '#FF6347',
                content: `
                    <h1>Professional Experience</h1>
                    <div style="margin-bottom: 20px;">
                        <h3>Software Engineer</h3>
                        <p><strong>Tech Corp Inc.</strong> | 2022 - Present</p>
                        <ul>
                            <li>Developed scalable web applications using React and Node.js.</li>
                            <li>Optimized database queries improving load times by 30%.</li>
                        </ul>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <h3>Junior Developer</h3>
                        <p><strong>Web Solutions LLC</strong> | 2020 - 2022</p>
                        <ul>
                            <li>Built responsive frontend interfaces using HTML, CSS, and JavaScript.</li>
                        </ul>
                    </div>
                `
            },
            'projects': {
                id: 'projects',
                title: 'My Projects',
                icon: 'folder-open', 
                type: 'explorer',
                iconColor: '#FFD700',
                content: `
                    <div class="project-entry">
                        <div class="project-header">
                            <div class="project-title">
                                <i data-lucide="folder" width="16" fill="#E6C658" color="#E6C658"></i> 
                                Task And Project Management System
                            </div>
                            <span class="project-badge">Public</span>
                        </div>
                        <p class="project-desc">
                           The system helps users manage projects and tasks in one place. It allows creating tasks, setting deadlines, tracking progress, and improving productivity with a simple and user-friendly interface.
                        </p>
                        <div class="project-actions">
                            <button class="xp-btn" onclick="window.open('https://github.com/PrincePanara/task-project_menegment', '_blank')"><i data-lucide="github" width="12"></i> Code</button>
                            <button class="xp-btn" onclick="window.open('http://yourprojectify.vercel.app', '_blank')"><i data-lucide="globe" width="12"></i> Live Demo</button>
                        </div>
                    </div>

                    <div class="project-entry">
                        <div class="project-header">
                            <div class="project-title">
                                <i data-lucide="folder" width="16" fill="#E6C658" color="#E6C658"></i> 
                                Gitfinder
                            </div>
                            <span class="project-badge">Public</span>
                        </div>
                        <p class="project-desc">
                            The GitHub Finder is a simple tool that lets users search GitHub profiles instantly. It displays key details like repositories, followers, and user information in a clean and easy-to-use interface.
                        </p>
                        <div class="project-actions">
                            <button class="xp-btn" onclick="window.open('https://github.com/PrincePanara/Gitfinder', '_blank')"><i data-lucide="github" width="12"></i> Code</button>
                            <button class="xp-btn" onclick="window.open('https://yourgitfinder.vercel.app', '_blank')"><i data-lucide="globe" width="12"></i> Live Demo</button>
                        </div>
                    </div>

                    <div class="project-entry">
                        <div class="project-header">
                            <div class="project-title">
                                <i data-lucide="folder" width="16" fill="#E6C658" color="#E6C658"></i> 
                                Project Alpha v3.0
                            </div>
                            <span class="project-badge">Public</span>
                        </div>
                        <p class="project-desc">
                            A robust web application built with React and Node.js. Features real-time collaboration and data visualization dashboard.
                        </p>
                        <div class="project-actions">
                            <button class="xp-btn" onclick="window.open('https://github.com/princepatel-2005/Project-Alpha-v3.0', '_blank')"><i data-lucide="github" width="12"></i> Code</button>
                            <button class="xp-btn" onclick="window.open('https://your-live-demo-link.com/project-3', '_blank')"><i data-lucide="globe" width="12"></i> Live Demo</button>
                        </div>
                    </div>

                    <div class="project-entry">
                        <div class="project-header">
                            <div class="project-title">
                                <i data-lucide="folder" width="16" fill="#E6C658" color="#E6C658"></i> 
                                Portfolio OS
                            </div>
                            <span class="project-badge">In Progress</span>
                        </div>
                        <p class="project-desc">
                            This very portfolio project! An interactive desktop experience built with vanilla JavaScript, HTML, and CSS.
                        </p>
                        <div class="project-actions">
                            <button class="xp-btn" onclick="window.open('https://github.com/princepatel-2005/Portfolio-OS', '_blank')"><i data-lucide="github" width="12"></i> Code</button>
                            <button class="xp-btn" onclick="window.open('https://your-live-demo-link.com/portfolio-os', '_blank')"><i data-lucide="globe" width="12"></i> Live Demo</button>
                        </div>
                    </div>

                    <div class="project-entry">
                        <div class="project-header">
                            <div class="project-title">
                                <i data-lucide="folder" width="16" fill="#E6C658" color="#E6C658"></i> 
                                E-commerce Platform
                            </div>
                            <span class="project-badge">Completed</span>
                        </div>
                        <p class="project-desc">
                            A full-featured e-commerce site with cart functionality, payment processing, and an admin dashboard.
                        </p>
                        <div class="project-actions">
                            <button class="xp-btn" onclick="window.open('https://github.com/princepatel-2005/E-commerce-Platform', '_blank')"><i data-lucide="github" width="12"></i> Code</button>
                            <button class="xp-btn" onclick="window.open('https://your-live-demo-link.com/ecommerce', '_blank')"><i data-lucide="globe" width="12"></i> Live Demo</button>
                        </div>
                    </div>
                `
            },
            'contact': {
                id: 'contact',
                title: 'Contact.exe',
                icon: 'mail', 
                type: 'mail',
                iconColor: '#00FF00',
                content: `
                    <h1>Contact Details</h1>
                    <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #245DDA;">
                        <p style="margin: 0 0 10px 0;"><strong>Email:</strong></p>
                        <p style="margin: 0; font-size: 14px; color: #245DDA;">
                            <a href="mailto:princepanara2008@gmail.com" style="text-decoration: none; color: #245DDA;">princepanara2008@gmail.com</a>
                        </p>
                    </div>

                    <h3 style="margin-top: 20px; margin-bottom: 15px; color: #174094;">Connect With Me</h3>
                    
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 20px;">
                        <a href="https://www.linkedin.com/in/prince-patel-88228b311/" target="_blank" style="text-decoration: none;">
                            <button class="xp-btn" style="background: linear-gradient(to bottom, #0077b5 0%, #005885 100%); color: white; border: 1px solid #004c7a;">
                                <i data-lucide="linkedin" width="14"></i> LinkedIn
                            </button>
                        </a>
                        
                        <a href="https://github.com/PrincePanara" target="_blank" style="text-decoration: none;">
                            <button class="xp-btn" style="background: linear-gradient(to bottom, #333 0%, #1a1a1a 100%); color: white; border: 1px solid #000;">
                                <i data-lucide="github" width="14"></i> GitHub
                            </button>
                        </a>
                        
                        <a href="https://instagram.com" target="_blank" style="text-decoration: none;">
                            <button class="xp-btn" style="background: linear-gradient(135deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); color: white; border: 1px solid #a41e6b;">
                                <i data-lucide="instagram" width="14"></i> Instagram
                            </button>
                        </a>
                        
                        <a href="https://twitter.com" target="_blank" style="text-decoration: none;">
                            <button class="xp-btn" style="background: linear-gradient(to bottom, #1da1f2 0%, #1a8cd8 100%); color: white; border: 1px solid #1b7ec9;">
                                <i data-lucide="twitter" width="14"></i> Twitter
                            </button>
                        </a>

                       
                    </div>

                    <h3 style="margin-top: 20px; margin-bottom: 10px; color: #174094;">Quick Actions</h3>
                    <button class="xp-btn" onclick="window.location.href='mailto:princepanara2008@gmail.com'" style="width: 100%; justify-content: center; margin-bottom: 8px; background: linear-gradient(to bottom, #4CAF50 0%, #45a049 100%); color: white; border: 1px solid #388E3C;">
                        <i data-lucide="send" width="14"></i> Send Email
                    </button>
                    
                    <button class="xp-btn" onclick="window.open('https://linkedin.com/in/prince-patel-88228b311', '_blank')" style="width: 100%; justify-content: center; background: linear-gradient(to bottom, #0077b5 0%, #005885 100%); color: white; border: 1px solid #004c7a;">
                        <i data-lucide="message-circle" width="14"></i> Message on LinkedIn
                    </button>
                `
            }
        };

        // --- State Management ---
        let windows = {}; 
        let highestZ = 100;
        let isStartOpen = false;
        let activeIcon = null;
        let lastFocusedWindow = null;

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDesktopIcons();
            renderStartMenu();
            setInterval(updateClock, 1000);
            updateClock();
            
            // Close start menu or deselect icon when clicking on the desktop
            document.getElementById('desktop').addEventListener('click', (e) => {
                if (e.target.id === 'desktop') {
                    if (isStartOpen) toggleStartMenu();
                    if (activeIcon) {
                        activeIcon.classList.remove('selected');
                        activeIcon = null;
                    }
                }
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Alt+Tab equivalent - cycle through windows
                if (e.altKey && e.key === 'Tab') {
                    e.preventDefault();
                    cycleWindows();
                }
                // Alt+F4 to close focused window
                if (e.altKey && e.key === 'F4') {
                    e.preventDefault();
                    if (lastFocusedWindow) {
                        closeWindow(lastFocusedWindow);
                    }
                }
            });

            // Initialize Icons
            lucide.createIcons();
        });

        // --- Rendering ---
        function renderDesktopIcons() {
            const desktop = document.getElementById('desktop');
            const iconOrder = ['computer', 'recycle', 'about', 'experience', 'projects', 'contact'];
            
            iconOrder.forEach(key => {
                if (apps[key]) {
                    const app = apps[key];
                    const el = document.createElement('div');
                    el.className = 'desktop-icon';

                    el.onclick = () => {
                        if (activeIcon) activeIcon.classList.remove('selected');
                        el.classList.add('selected');
                        activeIcon = el;
                    };
                    
                    el.ondblclick = () => openWindow(key);
                    
                    el.innerHTML = `
                        <i data-lucide="${app.icon}" width="40" height="40" color="${app.iconColor || '#fff'}" stroke-width="1.5"></i>
                        <div class="icon-label">${app.title}</div>
                    `;
                    desktop.appendChild(el);
                }
            });
        }

        function renderStartMenu() {
            const left = document.getElementById('start-left-items');
            const right = document.getElementById('start-right-items');
            
            const mainApps = ['about', 'projects', 'experience', 'contact'];
            mainApps.forEach(key => {
                const app = apps[key];
                const div = document.createElement('div');
                div.className = 'start-item';
                div.onclick = () => { openWindow(key); toggleStartMenu(); };
                div.innerHTML = `<i data-lucide="${app.icon}" width="16"></i> <span>${app.title.split('.')[0]}</span>`;
                left.appendChild(div);
            });

            const sysApps = ['computer'];
            sysApps.forEach(key => {
                const app = apps[key];
                const div = document.createElement('div');
                div.className = 'start-item';
                div.onclick = () => { openWindow(key); toggleStartMenu(); };
                div.innerHTML = `<i data-lucide="${app.icon}" width="16"></i> <span>${app.title.split('.')[0]}</span>`;
                right.appendChild(div);
            });
        }

        // --- Window Management ---
        function openWindow(key) {
            const app = apps[key];
            if (windows[key]) {
                focusWindow(key);
                if (windows[key].minimized) toggleMinimize(key);
                return;
            }

            const id = `win-${key}`;
            const win = document.createElement('div');
            win.id = id;
            win.className = 'window';
            win.style.zIndex = ++highestZ;
            
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const offset = Object.keys(windows).length * 30;
            
            let leftPos = 50 + offset;
            let topPos = 50 + offset;

            if (leftPos + 600 > viewportWidth) leftPos = 20;
            if (topPos + 400 > viewportHeight - 40) topPos = 20;

            win.style.top = `${topPos}px`;
            win.style.left = `${leftPos}px`;
            win.style.width = '1000px';
            win.style.height = '600px';

            win.innerHTML = `
                <div class="title-bar" id="${id}-header">
                    <div class="title-drag-area">
                        <i data-lucide="${app.icon}" width="16"></i>
                        <span>${app.title}</span>
                    </div>
                    <div class="window-controls">
                        <div class="control-btn minimize-btn" onclick="toggleMinimize('${key}')" title="Minimize">
                            <i data-lucide="minus" width="10"></i>
                        </div>
                        <div class="control-btn maximize-btn" onclick="toggleMaximize('${key}')" title="Maximize">
                            <i data-lucide="square" width="10"></i>
                        </div>
                        <div class="control-btn close-btn" onclick="closeWindow('${key}')" title="Close">
                            <i data-lucide="x" width="10"></i>
                        </div>
                    </div>
                </div>
                <div class="window-body">
                    <div class="menu-bar">
                        <span>File</span> <span>Edit</span> <span>View</span> <span>Help</span>
                    </div>
                    <div class="address-bar">
                        <span>Address</span>
                        <div class="address-input">C:\\Desktop\\${app.title}</div>
                    </div>
                    <div class="content-area">
                        ${app.content}
                    </div>
                    <div class="resizer"></div>
                </div>
            `;

            document.body.appendChild(win);
            
            // Setup window state
            windows[key] = {
                element: win,
                minimized: false,
                maximized: false,
                originalPos: {
                    top: win.style.top,
                    left: win.style.left,
                    width: win.style.width,
                    height: win.style.height
                }
            };
            
            // Setup event listeners AFTER element is in DOM
            const titleBar = win.querySelector('.title-bar');
            const dragArea = win.querySelector('.title-drag-area');
            const resizer = win.querySelector('.resizer');
            
            // Focus and drag setup
            titleBar.addEventListener('mousedown', (e) => {
                focusWindow(key);
            });
            titleBar.addEventListener('touchstart', (e) => {
                focusWindow(key);
            });
            
            // Double-click to maximize
            titleBar.addEventListener('dblclick', (e) => {
                if (e.target !== win.querySelector('.window-controls')) {
                    toggleMaximize(key);
                }
            });
            
            // Setup dragging and resizing
            makeDraggable(win, dragArea);
            makeResizable(win, resizer);
            
            updateTaskbar();
            lucide.createIcons();
        }

        function closeWindow(key) {
            if (windows[key]) {
                const win = windows[key].element;
                win.classList.add('closing');
                setTimeout(() => {
                    win.remove();
                    delete windows[key];
                    updateTaskbar();
                }, 200);
            }
        }

        function focusWindow(key) {
            if (windows[key]) {
                windows[key].element.style.zIndex = ++highestZ;
                lastFocusedWindow = key;
                updateTaskbar();
            }
        }

        function cycleWindows() {
            const openWindows = Object.keys(windows).filter(key => !windows[key].minimized && windows[key].element);
            if (openWindows.length === 0) return;
            
            // Find current highest z-index window
            let maxZ = -1;
            let currentKey = null;
            openWindows.forEach(key => {
                const z = parseInt(windows[key].element.style.zIndex);
                if (z > maxZ) {
                    maxZ = z;
                    currentKey = key;
                }
            });
            
            // Focus next window
            const currentIndex = openWindows.indexOf(currentKey);
            const nextIndex = (currentIndex + 1) % openWindows.length;
            focusWindow(openWindows[nextIndex]);
        }

        function toggleMinimize(key) {
            const win = windows[key];
            if (win.minimized) {
                win.element.style.display = 'flex';
                focusWindow(key);
                win.minimized = false;
            } else {
                win.element.style.display = 'none';
                win.minimized = true;
            }
            updateTaskbar();
        }

        function toggleMaximize(key) {
            const win = windows[key];
            const maximizeIcon = win.element.querySelector('.maximize-btn i');
            
            // Ensure resizer is always properly configured
            const resizer = win.element.querySelector('.resizer');

            if (win.maximized) {
                // Restore from maximized state
                win.element.classList.remove('maximized');
                win.element.style.top = win.originalPos.top;
                win.element.style.left = win.originalPos.left;
                win.element.style.width = win.originalPos.width;
                win.element.style.height = win.originalPos.height;
                
                // Re-enable resizer for non-maximized window
                if (resizer) resizer.style.pointerEvents = 'auto';
                
                if (maximizeIcon) maximizeIcon.setAttribute('data-lucide', 'square');
            } else {
                // Save current dimensions before maximizing
                const rect = win.element.getBoundingClientRect();
                win.originalPos = {
                    top: win.element.style.top,
                    left: win.element.style.left,
                    width: rect.width + 'px',
                    height: rect.height + 'px',
                };
                
                win.element.classList.add('maximized');
                
                // Disable resizer when maximized (restore on un-maximize)
                if (resizer) resizer.style.pointerEvents = 'none';
                
                if (maximizeIcon) maximizeIcon.setAttribute('data-lucide', 'copy');
            }
            
            win.maximized = !win.maximized;
            focusWindow(key);
            lucide.createIcons();
        }

        // --- Taskbar Logic ---
        function updateTaskbar() {
            const container = document.getElementById('taskbar-apps');
            container.innerHTML = '';
            
            Object.keys(windows).forEach(key => {
                const app = apps[key];
                const winData = windows[key];
                const btn = document.createElement('div');
                
                const isActive = parseInt(winData.element.style.zIndex) === highestZ && !winData.minimized;
                
                btn.className = `taskbar-item ${isActive ? 'active' : ''}`;
                btn.onclick = () => {
                    if (isActive) toggleMinimize(key);
                    else {
                        if (winData.minimized) toggleMinimize(key);
                        focusWindow(key);
                    }
                };
                btn.innerHTML = `
                    <i data-lucide="${app.icon}" width="14" style="margin-right:5px"></i>
                    <span style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${app.title}</span>
                `;
                container.appendChild(btn);
            });
            lucide.createIcons();
        }

        function toggleStartMenu() {
            const menu = document.getElementById('start-menu');
            const btn = document.getElementById('start-btn');
            isStartOpen = !isStartOpen;
            menu.style.display = isStartOpen ? 'block' : 'none';
            btn.style.filter = isStartOpen ? 'brightness(0.8)' : '';
        }

        function updateClock() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12;
            hours = hours ? hours : 12; 
            document.getElementById('clock-time').textContent = `${hours}:${minutes} ${ampm}`;
        }

        // --- Draggable & Resizable Logic ---
        function makeDraggable(element, handle) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            let isDragging = false;
            
            handle.addEventListener('mousedown', dragMouseDown);
            handle.addEventListener('touchstart', dragTouchStart, {passive: false});

            function dragMouseDown(e) {
                if (e.button !== 0) return; // Only allow left-click
                e.preventDefault();
                isDragging = true;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                const key = element.id.replace('win-', '');
                focusWindow(key);
                checkMaximized(key, e);
                
                document.addEventListener('mousemove', elementDrag, false);
                document.addEventListener('mouseup', closeDragElement, false);
            }

            function dragTouchStart(e) {
                e.preventDefault();
                isDragging = true;
                const touch = e.touches[0];
                pos3 = touch.clientX;
                pos4 = touch.clientY;
                
                const key = element.id.replace('win-', '');
                focusWindow(key);
                checkMaximized(key, e);
                
                document.addEventListener('touchmove', elementTouchDrag, {passive: false});
                document.addEventListener('touchend', closeDragElement, false);
            }

            function checkMaximized(key, e) {
                if (windows[key] && windows[key].maximized) {
                    const startX = e.clientX || e.touches[0].clientX;
                    toggleMaximize(key);
                    
                    // Get computed width and reposition
                    const rect = element.getBoundingClientRect();
                    const offsetX = startX - rect.left;
                    element.style.left = (startX - offsetX) + 'px';
                    element.style.top = '20px';
                    
                    // Reset position tracking
                    pos3 = startX;
                    pos4 = e.clientY || e.touches[0].clientY;
                }
            }

            function elementDrag(e) {
                if (!isDragging) return;
                e.preventDefault();
                calculatePos(e.clientX, e.clientY);
            }

            function elementTouchDrag(e) {
                if (!isDragging) return;
                const touch = e.touches[0];
                calculatePos(touch.clientX, touch.clientY);
            }

            function calculatePos(clientX, clientY) {
                pos1 = pos3 - clientX;
                pos2 = pos4 - clientY;
                pos3 = clientX;
                pos4 = clientY;
                
                let newTop = element.offsetTop - pos2;
                let newLeft = element.offsetLeft - pos1;
                
                // Boundary checking
                if (newTop < 0) newTop = 0;
                if (newLeft < 0) newLeft = 0;
                const maxTop = window.innerHeight - 40 - 30; // Account for taskbar
                const maxLeft = window.innerWidth - 100;
                if (newTop > maxTop) newTop = maxTop;
                if (newLeft > maxLeft) newLeft = maxLeft;

                element.style.top = newTop + "px";
                element.style.left = newLeft + "px";
            }

            function closeDragElement() {
                isDragging = false;
                document.removeEventListener('mousemove', elementDrag, false);
                document.removeEventListener('mouseup', closeDragElement, false);
                document.removeEventListener('touchmove', elementTouchDrag, false);
                document.removeEventListener('touchend', closeDragElement, false);
            }
        }

        function makeResizable(element, resizer) {
            let startX, startY, startWidth, startHeight;
            let isResizing = false;

            resizer.addEventListener('mousedown', initResize, false);
            resizer.addEventListener('touchstart', initResize, {passive: false});

            function initResize(e) {
                const key = element.id.replace('win-', '');
                
                // Don't allow resizing when maximized
                if (windows[key] && windows[key].maximized) return;
                
                e.preventDefault();
                isResizing = true;
                startX = e.clientX || e.touches[0].clientX;
                startY = e.clientY || e.touches[0].clientY;
                startWidth = parseInt(document.defaultView.getComputedStyle(element).width, 10);
                startHeight = parseInt(document.defaultView.getComputedStyle(element).height, 10);
                
                document.addEventListener('mousemove', doResize, false);
                document.addEventListener('mouseup', stopResize, false);
                document.addEventListener('touchmove', doResize, {passive: false});
                document.addEventListener('touchend', stopResize, false);
            }

            function doResize(e) {
                if (!isResizing) return;
                const newWidth = startWidth + (e.clientX || e.touches[0].clientX) - startX;
                const newHeight = startHeight + (e.clientY || e.touches[0].clientY) - startY;
                
                // Enforce minimum sizes
                if (newWidth >= 300) element.style.width = newWidth + 'px';
                if (newHeight >= 200) element.style.height = newHeight + 'px';
            }

            function stopResize() {
                isResizing = false;
                document.removeEventListener('mousemove', doResize, false);
                document.removeEventListener('mouseup', stopResize, false);
                document.removeEventListener('touchmove', doResize, false);
                document.removeEventListener('touchend', stopResize, false);
            }
        }
    </script>
    </body>

</html>

